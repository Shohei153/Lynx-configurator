let currentStep = 0;
let selectedConfiguration = "";

function showStep(stepNumber) {
  const steps = document.querySelectorAll(".step");
  steps.forEach((step, index) => step.classList.toggle("active", index === stepNumber));
}

function nextStep() {
  if (currentStep === 0) {
    // After selecting configuration type at step 0
    selectedConfiguration = document.querySelector('input[name="config"]:checked')?.value;
    if (selectedConfiguration === "single") {
      currentStep = 1; // Go to step 1 if "single" is selected
    } else if (selectedConfiguration === "mpo") {
      currentStep = 5; // Go to step 5 if "mpo" is selected
    }
  } else {
    if (selectedConfiguration === "single") {
      if (currentStep === 4) {
        currentStep = 9; // After step 4, jump to result page
      } else {
        currentStep++;
      }
    } else if (selectedConfiguration === "mpo") {
      if (currentStep === 8) {
        currentStep = 9; // After step 8, jump to result page
      } else {
        currentStep++;
      }
    }
  }
  showStep(currentStep);
}

function prevStep() {
  if (currentStep === 9) {
    // When returning from the result page
    if (selectedConfiguration === "single") {
      currentStep = 4;
    } else if (selectedConfiguration === "mpo") {
      currentStep = 8;
    }
  } else if (selectedConfiguration === "single" && currentStep === 1) {
    currentStep = 0;
  } else if (selectedConfiguration === "mpo" && currentStep === 5) {
    currentStep = 0;
  } else {
    currentStep--;
  }
  showStep(currentStep);
}

function updatePartNumber() {
  const config = document.querySelector('input[name="config"]:checked')?.value;
  if (config === "single") {
    const connector = document.querySelector('input[name="connector"]:checked')?.value || "";
    const polish = document.querySelector('input[name="polish"]:checked')?.value || "";
    const fiber = document.querySelector('input[name="fiber"]:checked')?.value || "";
    const boot = document.querySelector('input[name="boot"]:checked')?.value || "";
    document.getElementById("result").innerText = `LYNX3-${connector}-${polish}-${fiber}-${boot}`;
  } else if (config === "mpo") {
    const gender = document.querySelector('input[name="gender"]:checked')?.value || "";
    const fiberType = document.querySelector('input[name="bb"]:checked')?.value || "";
    const lossType = document.querySelector('input[name="cc"]:checked')?.value || "";
    const jacketType = document.querySelector('input[name="ddddd"]:checked')?.value || "";
    document.getElementById("result").innerText = `LYNX2-MPO12 ${gender}-${fiberType}-${lossType}-${jacketType}`;
  }
}

function handleFiberTypeChange(value) {
  const singleModeOptions = document.getElementById("cc-sm");
  const multiModeOptions = document.getElementById("cc-mm");
  if (value === "SM") {
    singleModeOptions.classList.remove("hidden");
    multiModeOptions.classList.add("hidden");
  } else {
    singleModeOptions.classList.add("hidden");
    multiModeOptions.classList.remove("hidden");
  }
}

window.onload = () => showStep(0);
